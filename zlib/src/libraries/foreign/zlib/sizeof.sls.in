;;;
;;;Part of: Nausicaa/Zlib
;;;Contents: size of libraries' C language types
;;;Date: Sun Dec  7, 2008
;;;
;;;Abstract
;;;
;;;
;;;
;;;Copyright (c) 2008, 2009 Marco Maggi <marcomaggi@gna.org>
;;;
;;;This program is free software:  you can redistribute it and/or modify
;;;it under the terms of the  GNU General Public License as published by
;;;the Free Software Foundation, either version 3 of the License, or (at
;;;your option) any later version.
;;;
;;;This program is  distributed in the hope that it  will be useful, but
;;;WITHOUT  ANY   WARRANTY;  without   even  the  implied   warranty  of
;;;MERCHANTABILITY  or FITNESS FOR  A PARTICULAR  PURPOSE.  See  the GNU
;;;General Public License for more details.
;;;
;;;You should  have received  a copy of  the GNU General  Public License
;;;along with this program.  If not, see <http://www.gnu.org/licenses/>.
;;;


(library (zlib sizeof)
  (export
    sizeof-zstream
    uInt		uLong			z_off_t

    ZLIB_VERNUM

    Z_NO_FLUSH		Z_PARTIAL_FLUSH		Z_SYNC_FLUSH
    Z_FULL_FLUSH	Z_FINISH		Z_BLOCK

    Z_OK		Z_STREAM_END		Z_NEED_DICT
    Z_ERRNO		Z_STREAM_ERROR		Z_DATA_ERROR
    Z_MEM_ERROR		Z_BUF_ERROR		Z_VERSION_ERROR

    Z_NO_COMPRESSION	Z_BEST_SPEED		Z_BEST_COMPRESSION
    Z_DEFAULT_COMPRESSION

    Z_FILTERED		Z_HUFFMAN_ONLY		Z_RLE
    Z_FIXED		Z_DEFAULT_STRATEGY

    Z_BINARY		Z_TEXT			Z_ASCII
    Z_UNKNOWN

    Z_DEFLATED

    Z_NULL

    zstream-next_in-set!	zstream-next_in-ref
    zstream-avail_in-set!	zstream-avail_in-ref
    zstream-total_in-set!	zstream-total_in-ref

    zstream-next_out-set!	zstream-next_out-ref
    zstream-avail_out-set!	zstream-avail_out-ref
    zstream-total_out-set!	zstream-total_out-ref

    zstream-msg-set!		zstream-msg-ref
    zstream-data_type-set!	zstream-data_type-ref
    zstream-adler-set!		zstream-adler-ref

    zstream-zalloc-set!		zstream-zalloc-ref
    zstream-zfree-set!		zstream-zfree-ref
    zstream-opaque-set!		zstream-opaque-ref)
  (import (rnrs)
    (foreign ffi)
    (foreign ffi sizeof)
    (foreign ffi pointers))

  ;; constants
  (define sizeof-zstream		@SIZEOF_ZSTREAM@)

  (define uInt				(quote @TYPEOF_ZLIB_UINT@))
  (define uLong				(quote @TYPEOF_ZLIB_ULONG@))
  (define z_off_t			(quote @TYPEOF_Z_OFF_T@))

  (define ZLIB_VERNUM			@VALUEOF_ZLIB_VERNUM@)

  (define Z_NO_FLUSH			@VALUEOF_Z_NO_FLUSH@)
  (define Z_PARTIAL_FLUSH		@VALUEOF_Z_PARTIAL_FLUSH@)
  (define Z_SYNC_FLUSH			@VALUEOF_Z_SYNC_FLUSH@)
  (define Z_FULL_FLUSH			@VALUEOF_Z_FULL_FLUSH@)
  (define Z_FINISH			@VALUEOF_Z_FINISH@)
  (define Z_BLOCK			@VALUEOF_Z_BLOCK@)

  (define Z_OK				@VALUEOF_Z_OK@)
  (define Z_STREAM_END			@VALUEOF_Z_STREAM_END@)
  (define Z_NEED_DICT			@VALUEOF_Z_NEED_DICT@)
  (define Z_ERRNO			@VALUEOF_Z_ERRNO@)
  (define Z_STREAM_ERROR		@VALUEOF_Z_STREAM_ERROR@)
  (define Z_DATA_ERROR			@VALUEOF_Z_DATA_ERROR@)
  (define Z_MEM_ERROR			@VALUEOF_Z_MEM_ERROR@)
  (define Z_BUF_ERROR			@VALUEOF_Z_BUF_ERROR@)
  (define Z_VERSION_ERROR		@VALUEOF_Z_VERSION_ERROR@)

  (define Z_NO_COMPRESSION		@VALUEOF_Z_NO_COMPRESSION@)
  (define Z_BEST_SPEED			@VALUEOF_Z_BEST_SPEED@)
  (define Z_BEST_COMPRESSION		@VALUEOF_Z_BEST_COMPRESSION@)
  (define Z_DEFAULT_COMPRESSION		@VALUEOF_Z_DEFAULT_COMPRESSION@)

  (define Z_FILTERED			@VALUEOF_Z_FILTERED@)
  (define Z_HUFFMAN_ONLY		@VALUEOF_Z_HUFFMAN_ONLY@)
  (define Z_RLE				@VALUEOF_Z_RLE@)
  (define Z_FIXED			@VALUEOF_Z_FIXED@)
  (define Z_DEFAULT_STRATEGY		@VALUEOF_Z_DEFAULT_STRATEGY@)

  (define Z_BINARY			@VALUEOF_Z_BINARY@)
  (define Z_TEXT			@VALUEOF_Z_TEXT@)
  (define Z_ASCII			@VALUEOF_Z_ASCII@)
  (define Z_UNKNOWN			@VALUEOF_Z_UNKNOWN@)

  (define Z_DEFLATED			@VALUEOF_Z_DEFLATED@)

  (define Z_NULL			@VALUEOF_Z_NULL@)

  (define-c-struct-accessor-and-mutator
    zstream-next_in-set!
    zstream-next_in-ref
    @OFFSETOF_ZSTREAM_NEXT_IN@
    @SETTEROF_ZSTREAM_NEXT_IN@
    @GETTEROF_ZSTREAM_NEXT_IN@)

  (define-c-struct-accessor-and-mutator
    zstream-avail_in-set!
    zstream-avail_in-ref
    @OFFSETOF_ZSTREAM_AVAIL_IN@
    @SETTEROF_ZSTREAM_AVAIL_IN@
    @GETTEROF_ZSTREAM_AVAIL_IN@)

  (define-c-struct-accessor-and-mutator
    zstream-total_in-set!
    zstream-total_in-ref
    @OFFSETOF_ZSTREAM_TOTAL_IN@
    @SETTEROF_ZSTREAM_TOTAL_IN@
    @GETTEROF_ZSTREAM_TOTAL_IN@)

  (define-c-struct-accessor-and-mutator
    zstream-next_out-set!
    zstream-next_out-ref
    @OFFSETOF_ZSTREAM_NEXT_OUT@
    @SETTEROF_ZSTREAM_NEXT_OUT@
    @GETTEROF_ZSTREAM_NEXT_OUT@)

  (define-c-struct-accessor-and-mutator
    zstream-avail_out-set!
    zstream-avail_out-ref
    @OFFSETOF_ZSTREAM_AVAIL_OUT@
    @SETTEROF_ZSTREAM_AVAIL_OUT@
    @GETTEROF_ZSTREAM_AVAIL_OUT@)

  (define-c-struct-accessor-and-mutator
    zstream-total_out-set!
    zstream-total_out-ref
    @OFFSETOF_ZSTREAM_TOTAL_OUT@
    @SETTEROF_ZSTREAM_TOTAL_OUT@
    @GETTEROF_ZSTREAM_TOTAL_OUT@)

  (define-c-struct-accessor-and-mutator
    zstream-msg-set!
    zstream-msg-ref
    @OFFSETOF_ZSTREAM_MSG@
    @SETTEROF_ZSTREAM_MSG@
    @GETTEROF_ZSTREAM_MSG@)

  (define-c-struct-accessor-and-mutator
    zstream-data_type-set!
    zstream-data_type-ref
    @OFFSETOF_ZSTREAM_DATA_TYPE@
    @SETTEROF_ZSTREAM_DATA_TYPE@
    @GETTEROF_ZSTREAM_DATA_TYPE@)

  (define-c-struct-accessor-and-mutator
    zstream-adler-set!
    zstream-adler-ref
    @OFFSETOF_ZSTREAM_ADLER@
    @SETTEROF_ZSTREAM_ADLER@
    @GETTEROF_ZSTREAM_ADLER@)

  (define-c-struct-accessor-and-mutator
    zstream-zalloc-set!
    zstream-zalloc-ref
    @OFFSETOF_ZSTREAM_ZALLOC@
    @SETTEROF_ZSTREAM_ZALLOC@
    @GETTEROF_ZSTREAM_ZALLOC@)

  (define-c-struct-accessor-and-mutator
    zstream-zfree-set!
    zstream-zfree-ref
    @OFFSETOF_ZSTREAM_ZFREE@
    @SETTEROF_ZSTREAM_ZFREE@
    @GETTEROF_ZSTREAM_ZFREE@)

  (define-c-struct-accessor-and-mutator
    zstream-opaque-set!
    zstream-opaque-ref
    @OFFSETOF_ZSTREAM_OPAQUE@
    @SETTEROF_ZSTREAM_OPAQUE@
    @GETTEROF_ZSTREAM_OPAQUE@))

;;; end of file
